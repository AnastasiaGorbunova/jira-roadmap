<!-- TODO: add loader while loading project -->
<div *ngIf="project" class="project">
	<div class="project-navigation" (click)="navigateToBoard()">
		<mat-icon class="back-icon">arrow_back</mat-icon>
		Go to projects board
	</div>

	<div class="project-header">
		<p class="project-title">{{ project.name }}</p>

		<div class="project-actions">
			<button mat-stroked-button class="action" type="submit" (click)="createTask()">
				Create new task
			</button>

			<button mat-stroked-button class="action" type="submit" (click)="editProject()">
				Edit project
			</button>
			<button mat-stroked-button class="action" type="submit" (click)="deleteProject()">
				Delete project
			</button>
		</div>
	</div>

	<p *ngIf="project.description" class="project-description">{{ project.description }}</p>

	<div class="project-tasks-table">
		<div class="header">
			<div *ngFor="let status of tasksStatuses; trackBy: trackById" class="status">
				<p class="status-name">{{ taskStatusesSet[status] }}</p>
			</div>
		</div>

		<div *ngFor="let task of tasksIssueMap.tasksWithSubtasks; trackBy: trackById" class="task">
			<div class="task-header">
				Task: {{ task.name }}
			</div>

			<div class="task-subtasks">
				<div *ngFor="let status of tasksStatuses; trackBy: trackById" class="column">
	
					<div class="column-items">
						<div *ngFor="let subtask of getSubtasks(task.id, status); trackBy: trackById" class="item">
							{{ subtask.name }}
						</div>
					</div>
					
				</div>
			</div>
		</div>

		<div class="task">
			<div class="task-header">
				Other issues
			</div>

			<div class="task-subtasks">
				<div *ngFor="let status of tasksStatuses; trackBy: trackById" class="column">
	
					<div class="column-items">
						<div *ngFor="let task of getOtherIssuesTasks(status); trackBy: trackById" class="item">
							<app-task-card-container
								[task]="task"
								[projectId]="project.id"
							></app-task-card-container>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
</div>
