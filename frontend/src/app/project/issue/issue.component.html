<div *ngIf="project && issue" class="issue">
	<div class="issue-navigation">
		<div class="issue-navigation-board" (click)="navigateToBoard()">
			<mat-icon class="back-icon">arrow_back</mat-icon>
			Projects board
		</div>/
		<div class="issue-navigation-project" (click)="navigateToProject()">
			{{ project.name }}
		</div>
	</div>

	<div class="issue-header">
		<p class="issue-title">{{ issue.name }}</p>

		<div class="issue-actions">
			<button 
				*ngIf="canCreateSubtask" 
				mat-stroked-button 
				class="action" 
				type="submit" 
				(click)="createSubTask()"
			>
				Create subtask
			</button>

			<button 
				mat-stroked-button 
				class="action" 
				type="submit" 
				(click)="editIssue()"
			>
				Edit issue
			</button>

			<button 
				*ngIf="isUserAdmin || isUserLeader" 
				mat-stroked-button 
				class="action" 
				type="submit" 
				(click)="deleteIssue()"
			>
				Delete issue
			</button>
		</div>
	</div>

	<div class="issue-info">
		<p class="issue-type">Type: {{ issueType }}</p>
		<p class="issue-type">Assignee: {{ getAssignee(issue.assignee_id) }}</p>
		<p class="issue-type">Reporter: {{ getAssignee(issue.creator_id) }}</p>
		<p *ngIf="issue.description" class="issue-description">Description: {{ issue.description }}</p>	
	</div>

	<mat-form-field appearance="outline">
		<mat-label>Status</mat-label>
		<mat-select 
			[formControl]="issueStatus"
			(selectionChange)="updateIssueField('status', $event.value)"
		>
			<mat-option *ngFor="let status of issueStatuses" [value]="status">
				{{ issueStatusesSet[status] }}
			</mat-option>
		</mat-select>
	</mat-form-field>

	<div *ngIf="issueSubtasks?.length" class="issue-subtasks">
		<p class="issue-subtasks-header">Subtasks</p>
		<div class="issue-subtasks-list">
			<div 
				*ngFor="let subtask of issueSubtasks; trackBy: trackById" 
				class="subtask" 
				(click)="navigateToSubtask(subtask.id)"
			>
				<p class="subtask-name">{{ subtask.name }}</p>

				<div class="subtask-info">
					<span class="subtask-assignee">{{ getAssignee(subtask.assignee_id) }}</span>
					<span class="subtask-status">{{ issueStatusesSet[subtask?.status] }}</span>
				</div>
				
			</div>
		</div>
	</div>

</div>
