<div class="issue" *ngIf="project && issue">
	<div class="issue-navigation">
		<div class="issue-navigation-board" (click)="navigateToBoard()">
			<mat-icon class="back-icon">arrow_back</mat-icon>
			Projects board
		</div>/
		<div class="issue-navigation-project" (click)="navigateToProject()">
			{{ project.name }}
		</div>
	</div>

	<div class="issue-header">
		<p class="issue-title">{{ issue.name }}</p>

		<div class="issue-actions">
			<button *ngIf="canCreateSubtask" mat-stroked-button class="action" type="submit" (click)="createSubTask()">
				Create subtask
			</button>

			<button mat-stroked-button class="action" type="submit" (click)="editIssue()">
				Edit issue
			</button>

			<button mat-stroked-button class="action" type="submit" (click)="deleteIssue()">
				Delete issue
			</button>
		</div>
	</div>

	<p class="issue-type">Type: {{ issueType }}</p>
	<p class="issue-type">Assignee: {{ issueAssignee || unassigned }}</p>
	<p class="issue-type">Reporter: {{ issueReporter }}</p>
	<p *ngIf="issue.description" class="issue-description">Description: {{ issue.description }}</p>


	<mat-form-field appearance="outline">
		<mat-label>Status</mat-label>
		<mat-select [formControl]="issueStatus"
			(selectionChange)="updateIssueField('status', $event.value)">
			<mat-option *ngFor="let status of issueStatuses" [value]="status">
				{{ issueStatusesSet[status] }}
			</mat-option>
		</mat-select>
	</mat-form-field>

	<div *ngIf="issueSubtasks?.length" class="issue-subtasks">
		<p class="issue-subtasks-header">Subtasks</p>
		<div *ngFor="let subtask of issueSubtasks; trackBy: trackById" class="subtask">
			<p class="subtask-name">{{ subtask.name }}</p>
			<span class="subtask-name">{{ issueStatusesSet[subtask?.status] }}</span>
		</div>
	</div>

</div>
